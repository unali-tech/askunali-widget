!function(){var n=window.askUnaliConfig||{};if(n.apiKey){var e=document.getElementById("askunali");if(e){e.outerHTML='<div id="askunali-widget" class="askunali-content" style="color: #303840;"><div class="askunali-content-wrapper"><div class="askunali-question-input-container" style="align-items: center; background: white; border: 1px solid #D0DDE8; border-radius: 10px; display: flex; height: auto; justify-content: space-between; min-height: 84px; position: relative;"><svg class="askunali-question-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="height: 30px; margin-left: 20px; position: absolute; width: 30px;"><circle cx="10" cy="10" r="9" fill="white" stroke="#004695" stroke-width="2"/><path d="M23 23L17 17" stroke="#004695" stroke-width="2" stroke-linecap="round"/></svg><div contenteditable="true" class="askunali-question-input-area" data-placeholder="Ask question here" id="askunali-question_input_div" style="background: none; border: none; color: inherit; cursor: text; flex-grow: 1; font-family: inherit; font-size: 18px; line-height: 40px; margin: 0 20px 0 70px; outline: none; padding: 0; resize: none; text-align: left;"></div><input type="hidden" id="askunali-question_input"></div><div class="askunali-question-output-container" style="background: #F9FBFF; border: 1px solid #D0DDE8; border-radius: 10px; font-size: 18px; margin-top: 20px; min-height: 167px; padding: 20px 20px 70px 70px; position: relative;"><svg class="askunali-question-output-icon" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" style="height: 32px; left: 20px; position: absolute; top: 20px; width: 32px;"><circle cx="16" cy="16" r="15.5" fill="#233550" stroke="#DFE2F4"/><circle cx="16" cy="16" r="9" stroke="#FDFDFD" stroke-width="2"/></svg><div class="askunali-answer-placeholder" style="color: rgba(19, 19, 19, 0.4); cursor: default; left: 70px; position: absolute; top: 23px;">View answer here.</div><div id="askunali-answer"></div><div id="askunali-separator" style="border-top: 1px solid #D0DDE8; bottom: 50px; display: none; left: 20px; position: absolute; width: 96%;"></div><div id="askunali-sources" style="align-items: center; bottom: 10px; display: none; font-size: 14px; left: 20px; position: absolute;"></div><div id="askunali-link" style="display: none;"><a href="https://askunali.com" target="_blank" style="bottom: 10px; color: #303840; font-size: 14px; position: absolute; right: 20px; text-decoration: underline;">Askunali.com</a></div><button id="askunali-return-button" style="border: 1px solid #3C444C; border-radius: 20px; bottom: 65px; cursor: pointer; display: none; padding: 5px 20px; position: absolute; right: 20px;">‚Üê &nbsp; return</button></div></div></div>',function(){const e=document.getElementById("askunali-question_input_div"),t=document.querySelector(".askunali-question-input-container"),i=document.querySelector(".askunali-answer-placeholder");function o(){e.textContent.trim().length>0?e.classList.add("not-empty"):e.classList.remove("not-empty")}e.addEventListener("blur",function(){o()}),e.addEventListener("input",o),o(),t.addEventListener("click",function(n){if(document.activeElement!==e&&(e.focus(),e.textContent.length>0)){const n=document.createRange(),t=window.getSelection();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}}),e.addEventListener("mousedown",function(n){document.activeElement!==e&&(n.preventDefault(),e.focus())});var s=document.createElement("style");n.styles&&(n.styles.borderColor&&(s.innerHTML+=`\n          .askunali-question-input-container, \n          .askunali-question-output-container {\n            border: 1px solid ${n.styles.borderColor} !important;\n          }\n        `),n.styles.borderRadius&&(s.innerHTML+=`\n          .askunali-question-input-container,\n          .askunali-question-output-container {\n            border-radius: ${n.styles.borderRadius} !important;  \n          }\n        `),n.styles.questionBox&&(n.styles.questionBox.backgroundColor&&(s.innerHTML+=`\n            .askunali-question-input-container {\n              background-color: ${n.styles.questionBox.backgroundColor} !important;\n            }\n          `),n.styles.questionBox.fontColor&&(s.innerHTML+=`\n            .askunali-question-input-container {\n              color: ${n.styles.questionBox.fontColor} !important;\n            }\n          `)),n.styles.answerBox&&(n.styles.answerBox.backgroundColor&&(s.innerHTML+=`\n            .askunali-question-output-container {\n              background-color: ${n.styles.answerBox.backgroundColor} !important;\n            }\n          `),n.styles.answerBox.fontColor&&(s.innerHTML+=`\n            .askunali-question-output-container {\n              color: ${n.styles.answerBox.fontColor} !important;\n            }\n          `))),s.innerHTML+="\n      #askunali-widget .askunali-question-input-area::before {\n        content: attr(data-placeholder);\n        display: block;\n        color: rgba(19, 19, 19, 0.4);\n      }\n\n      #askunali-widget .askunali-question-input-area:focus::before {\n        content: none;\n      }\n\n      #askunali-widget .askunali-question-input-area.not-empty::before {\n        display: none;\n      }\n    ",document.head.appendChild(s),e.addEventListener("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),function(){const t=e.textContent.trim();""!==t&&fetch("https://unalihealth.com/ask_question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:t,api_key:n.apiKey})}).then(n=>n.json()).then(n=>{const e=document.getElementById("askunali-answer");i.style.display="none",e.textContent="";let t="",o=0;const s=20;function a(){const e=document.getElementById("askunali-separator"),t=document.getElementById("askunali-sources"),i=document.getElementById("askunali-link");setTimeout(()=>{e.style.display="block"},500),setTimeout(()=>{t.style.display="flex",function(){const e=document.getElementById("askunali-sources");n.ingredients_data.length,n.activities_data.length,e.innerHTML="Sources: ",[...n.ingredients_data,...n.activities_data].forEach((n,t)=>{const i=document.createElement("a");i.classList.add("askunali-sources-count"),i.href=n.paper_url,i.target="_blank",i.textContent=t+1,i.style.cssText="\n                border: 1px solid #3C444C;\n                color: #004695;\n                border-radius: 50%;\n                width: 22px;\n                height: 22px;\n                display: inline-flex;\n                justify-content: center;\n                align-items: center;\n                margin-left: 8px;\n                font-size: 14px;\n                cursor: pointer;\n              ",e.appendChild(i)})}()},1e3),setTimeout(()=>{i.style.display="block"},1500)}e.addEventListener("click",function(t){if(t.target.classList.contains("askunali-ingredient-link")){t.preventDefault();const i=t.target.textContent,o=[...n.ingredients_data,...n.activities_data].find(n=>n.ingredient_name===i||n.activity_name===i);if(o){const n=e.innerHTML;e.innerHTML=o.paper_summary,function(n){const t=document.getElementById("askunali-return-button");t.style.display="block",t.onclick=function(){e.innerHTML=n,t.style.display="none"}}(n)}}}),function i(){if(o<n.answer.length){const a=n.answer.charAt(o);t+=a,e.innerHTML=function(e){const t=n.ingredients_data.map(n=>n.ingredient_name),i=n.activities_data.map(n=>n.activity_name);return[...t,...i].forEach(n=>{const t=new RegExp(`\\b${n}\\b`,"gi");e=e.replace(t,`<a href="#" class="askunali-ingredient-link" style="color: #3366CC;">${n}</a>`)}),e}(t),o++,setTimeout(i,s)}else a()}()}).catch(n=>{console.error("Error:",n)})}())})}()}}else console.error("No API key provided")}();