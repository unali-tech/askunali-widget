!function(){var n=window.askUnaliConfig||{};n.apiKey||(console.warn("No API key provided. Requests will be limited."),n.apiKey="default");var t=document.getElementById("askunali");if(t){t.outerHTML='<div id="askunali-widget" class="askunali-content" style="color: #303840;"><div class="askunali-content-wrapper"><div class="askunali-question-input-container" style="align-items: center; background: white; border: 1px solid #D0DDE8; border-radius: 10px; display: flex; height: auto; justify-content: space-between; min-height: 84px; position: relative;"><svg class="askunali-question-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="height: 30px; margin-left: 20px; position: absolute; width: 30px;"><circle cx="10" cy="10" r="9" fill="white" stroke="#004695" stroke-width="2"/><path d="M23 23L17 17" stroke="#004695" stroke-width="2" stroke-linecap="round"/></svg><div contenteditable="true" class="askunali-question-input-area" data-placeholder="Ask question here" id="askunali-question_input_div" style="background: none; border: none; color: inherit; cursor: text; flex-grow: 1; font-family: inherit; font-size: 18px; line-height: 40px; margin: 0 20px 0 70px; outline: none; padding: 0; resize: none; text-align: left;"></div><input type="hidden" id="askunali-question_input"></div><div class="askunali-question-output-container" style="background: #F9FBFF; border: 1px solid #D0DDE8; border-radius: 10px; font-size: 18px; margin-top: 20px; min-height: 167px; padding: 20px 20px 70px 70px; position: relative;"><svg id="askunali-question-output-icon" width="32" height="32" viewBox="0 0 42 42" xmlns="http://www.w3.org/2000/svg" style="left: 20px; position: absolute; top: 20px;"><circle cx="21" cy="21" r="14.7" fill="white"/><circle cx="21" cy="21" r="12.6" fill="#233550"/><g class="outer-donut-1"><g><path d="M 21,2.1 A 18.9,18.9 0 0 1 39.9,21 L 35.7,21 A 14.7,14.7 0 0 0 21,6.3 Z" fill="#233550"/></g></g><g class="outer-donut-2"><g><path d="M 39.9,21 A 18.9,18.9 0 0 1 21,39.9 L 21,35.7 A 14.7,14.7 0 0 0 35.7,21 Z" fill="#233550"/></g></g><g class="outer-donut-3"><g><path d="M 21,39.9 A 18.9,18.9 0 0 1 2.1,21 L 6.3,21 A 14.7,14.7 0 0 0 21,35.7 Z" fill="#233550"/></g></g><g class="outer-donut-4"><g><path d="M 2.1,21 A 18.9,18.9 0 0 1 21,2.1 L 21,6.3 A 14.7,14.7 0 0 0 6.3,21 Z" fill="#233550"/></g></g></svg><div class="askunali-answer-placeholder" style="color: rgba(19, 19, 19, 0.4); cursor: default; left: 70px; position: absolute; top: 23px;">View answer here.</div><div id="askunali-answer"></div><div id="askunali-shopping-container" style="align-items: center; display: none; height: 35px; justify-content: left; margin-top: 20px; width: 100%;"><svg id="askunali-shopping-cart" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 8.5H8L11 20H24L27 10.5H12.5" stroke="#303840" stroke-width="2" stroke-linecap="round"/><circle cx="22.5" cy="24.5" r="2.5" fill="#303840"/><circle cx="22.5" cy="24.5" r="2.5" fill="#303840"/><circle cx="22.5" cy="24.5" r="2.5" fill="#303840"/><circle cx="13.5" cy="24.5" r="2.5" fill="#303840"/><circle cx="13.5" cy="24.5" r="2.5" fill="#303840"/><circle cx="13.5" cy="24.5" r="2.5" fill="#303840"/></svg> <svg id="askunali-shopping-cart-separator" width="3" height="10" viewBox="0 0 3 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.26136 9.10795C0.950758 9.10795 0.683712 8.99811 0.460227 8.77841C0.236742 8.55492 0.125 8.28598 0.125 7.97159C0.125 7.66098 0.236742 7.39583 0.460227 7.17614C0.683712 6.95265 0.950758 6.84091 1.26136 6.84091C1.57197 6.84091 1.83902 6.95265 2.0625 7.17614C2.28598 7.39583 2.39773 7.66098 2.39773 7.97159C2.39773 8.17992 2.3447 8.37121 2.23864 8.54545C2.13636 8.71591 2 8.85227 1.82955 8.95455C1.65909 9.05682 1.4697 9.10795 1.26136 9.10795ZM1.26136 2.75568C0.950758 2.75568 0.683712 2.64394 0.460227 2.42045C0.236742 2.19697 0.125 1.92992 0.125 1.61932C0.125 1.30871 0.236742 1.04356 0.460227 0.823863C0.683712 0.600378 0.950758 0.488636 1.26136 0.488636C1.57197 0.488636 1.83902 0.600378 2.0625 0.823863C2.28598 1.04356 2.39773 1.30871 2.39773 1.61932C2.39773 1.82765 2.3447 2.01894 2.23864 2.19318C2.13636 2.36364 2 2.5 1.82955 2.60227C1.65909 2.70455 1.4697 2.75568 1.26136 2.75568Z" fill="#303840"/></svg><div id="askunali-shopping-links"></div></div><div id="askunali-separator" style="border-top: 1px solid #D0DDE8; bottom: 50px; display: none; left: 20px; position: absolute; width: 96%;"></div><div id="askunali-sources" style="align-items: center; bottom: 10px; display: none; font-size: 14px; left: 20px; position: absolute;"></div><div id="askunali-link" style="display: none;"><a href="https://askunali.com" target="_blank" style="bottom: 10px; color: #303840; font-size: 14px; position: absolute; right: 20px; text-decoration: underline;">Askunali.com</a></div><button id="askunali-return-button" style="border: 1px solid #3C444C; border-radius: 20px; bottom: 65px; cursor: pointer; display: none; padding: 5px 20px; position: absolute; right: 20px;">‚Üê &nbsp; return</button></div></div></div>',function(){const t=document.getElementById("askunali-question_input_div"),e=document.querySelector(".askunali-question-input-container"),i=document.querySelector(".askunali-answer-placeholder");function o(){t.textContent.trim().length>0?t.classList.add("not-empty"):t.classList.remove("not-empty")}window.askUnaliUpdateApiKey=function(t){n.apiKey=t},t.addEventListener("blur",function(){o()}),t.addEventListener("input",o),o(),e.addEventListener("click",function(n){if(document.activeElement!==t&&(t.focus(),t.textContent.length>0)){const n=document.createRange(),e=window.getSelection();n.selectNodeContents(t),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}}),t.addEventListener("mousedown",function(n){document.activeElement!==t&&(n.preventDefault(),t.focus())});var s=document.createElement("style");n.styles&&(n.styles.borderColor&&(s.innerHTML+=`\n          .askunali-question-input-container, \n          .askunali-question-output-container {\n            border: 1px solid ${n.styles.borderColor} !important;\n          }\n        `),n.styles.borderRadius&&(s.innerHTML+=`\n          .askunali-question-input-container,\n          .askunali-question-output-container {\n            border-radius: ${n.styles.borderRadius} !important;  \n          }\n        `),n.styles.questionBox&&(n.styles.questionBox.backgroundColor&&(s.innerHTML+=`\n            .askunali-question-input-container {\n              background-color: ${n.styles.questionBox.backgroundColor} !important;\n            }\n          `),n.styles.questionBox.fontColor&&(s.innerHTML+=`\n            .askunali-question-input-container {\n              color: ${n.styles.questionBox.fontColor} !important;\n            }\n          `)),n.styles.answerBox&&(n.styles.answerBox.backgroundColor&&(s.innerHTML+=`\n            .askunali-question-output-container {\n              background-color: ${n.styles.answerBox.backgroundColor} !important;\n            }\n          `),n.styles.answerBox.fontColor&&(s.innerHTML+=`\n            .askunali-question-output-container {\n              color: ${n.styles.answerBox.fontColor} !important;\n            }\n          `))),s.innerHTML+="\n      #askunali-widget .askunali-question-input-area::before {\n        content: attr(data-placeholder);\n        display: block;\n        color: rgba(19, 19, 19, 0.4);\n      }\n\n      #askunali-widget .askunali-question-input-area:focus::before {\n        content: none;\n      }\n\n      #askunali-widget .askunali-question-input-area.not-empty::before {\n        display: none;\n      }\n    ",s.innerHTML+="\n      @keyframes moveDonut1 {\n        0% {\n          transform: translate(0, 0);\n        }\n        100% {\n          transform: translate(0.5px, calc(-1 * 0.5px));\n        }\n      }\n\n      @keyframes moveDonut2 {\n        0% {\n          transform: translate(0, 0);\n        }\n        100% {\n          transform: translate(0.5px, 0.5px);\n        }\n      }\n\n      @keyframes moveDonut3 {\n        0% {\n          transform: translate(0, 0);\n        }\n        100% {\n          transform: translate(calc(-1 * 0.5px), 0.5px);\n        }\n      }\n\n      @keyframes moveDonut4 {\n        0% {\n          transform: translate(0, 0);\n        }\n        100% {\n          transform: translate(calc(-1 * 0.5px), calc(-1 * 0.5px));\n        }\n      }\n\n      @keyframes rotateSVG {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n\n      .animate-svg .outer-donut-1 > g {\n        animation: moveDonut1 0.1s ease-in-out forwards;\n      }\n\n      .animate-svg .outer-donut-2 > g {\n        animation: moveDonut2 0.1s ease-in-out forwards;\n      }\n\n      .animate-svg .outer-donut-3 > g {\n        animation: moveDonut3 0.1s ease-in-out forwards;\n      }\n\n      .animate-svg .outer-donut-4 > g {\n        animation: moveDonut4 0.1s ease-in-out forwards;\n      }\n\n      .animate-svg.rotate > g {\n        animation: rotateSVG 3s linear infinite;\n        transform-origin: center;\n      }\n    ",document.head.appendChild(s),t.addEventListener("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),function(){const e=t.textContent.trim();if(""!==e){!function(){const n=document.getElementById("askunali-answer"),t=document.querySelector(".askunali-answer-placeholder"),e=document.getElementById("askunali-separator"),i=document.getElementById("askunali-sources"),o=document.getElementById("askunali-link"),s=document.getElementById("askunali-shopping-links");n.textContent="",t.style.display="block",e.style.display="none",i.style.display="none",i.textContent="",o.style.display="none",s.style.display="none",s.innerHTML=""}();const t=document.getElementById("askunali-question-output-icon");t.classList.add("animate-svg"),setTimeout(()=>{t.classList.add("rotate")},100);const o=performance.now();console.log("Start time:",o),fetch("https://rag-api-e0qu.onrender.com/ask-question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e,api_key:n.apiKey})}).then(n=>n.json()).then(n=>{const e=performance.now();console.log("End time:",e),console.log("Response time:",e-o,"ms"),t.classList.remove("rotate"),t.classList.remove("animate-svg"),setTimeout(()=>{t.querySelectorAll('g[class^="outer-donut-"] > g').forEach(n=>{n.style.transform="translate(0, 0)"})},0);const s=document.getElementById("askunali-answer");i.style.display="none",s.textContent="";let a="",l=0;const r=20,c=n.type;function u(){const t=document.getElementById("askunali-separator"),e=document.getElementById("askunali-sources");document.getElementById("askunali-link"),(n.shopping_data.activities.length>0||n.shopping_data.ingredients.length>0)&&function(){const t=document.getElementById("askunali-shopping-container");t.style.display="flex";const e=n.shopping_data.activities;let i=0;const o=200;!function n(){if(i<e.length){const s=e[i],a=document.createElement("a");a.classList.add("askunali-shopping-container-count"),a.href=s.link,a.target="_blank",a.textContent=s.display_name,a.style.cssText="\n                  border: 1px solid #004695;\n                  color: #303840;\n                  border-radius: 20px;\n                  padding: 5px 15px;\n                  display: inline-flex;\n                  justify-content: center;\n                  align-items: center;\n                  margin-left: 8px;\n                  font-size: 16px;\n                  cursor: pointer;\n                ",t.appendChild(a),i++,setTimeout(n,o)}}()}(),setTimeout(()=>{t.style.display="block"},500),setTimeout(()=>{e.style.display="flex",document.getElementById("askunali-link").style.cssText="\n              display: flex;\n              align-items: \n              text-decoration: underline;\n              color: #303840;\n              font-size: 14px;\n            \n              position: absolute;\n              bottom: 0px;\n              right: 20px;\n            ",d()},1e3)}function d(){const t=document.getElementById("askunali-sources");n.ingredients_data.length,n.activities_data.length;let e="Sources: ",i=0;const o=30;!function s(){i<e.length?(t.innerHTML+=e.charAt(i),i++,setTimeout(s,o)):function(){const t=document.getElementById("askunali-sources"),e=[...n.ingredients_data,...n.activities_data];let i=0;const o=50;!function n(){if(i<e.length){const s=e[i],a=document.createElement("a");a.classList.add("askunali-sources-count"),a.href=s.paper_url,a.target="_blank",a.textContent=i+1,a.style.cssText="\n                  border: 1px solid #004695;\n                  color: #004695;\n                  border-radius: 50%;\n                  width: 22px;\n                  height: 22px;\n                  display: inline-flex;\n                  justify-content: center;\n                  align-items: center;\n                  margin-left: 8px;\n                  font-size: 14px;\n                  cursor: pointer;\n                ",t.appendChild(a),i++,setTimeout(n,o)}}()}()}()}s.addEventListener("click",function(t){if(t.target.classList.contains("askunali-ingredient-link")){t.preventDefault();const e=t.target.textContent,i=[...n.ingredients_data,...n.activities_data].find(n=>n.ingredient_name===e||n.activity_name===e);if(i){const n=s.innerHTML;s.innerHTML=i.paper_summary,function(n){const t=document.getElementById("askunali-return-button");t.style.display="block",t.onclick=function(){s.innerHTML=n,t.style.display="none"}}(n)}}}),function t(){if(l<n.answer.length){const e=n.answer.charAt(l);a+=e,"enhanced"===c?s.innerHTML=function(t){const e=n.ingredients_data.map(n=>n.ingredient_name),i=n.activities_data.map(n=>n.activity_name);return[...e,...i].forEach(n=>{const e=new RegExp(`\\b${n}\\b`,"gi");t=t.replace(e,`<a href="#" class="askunali-ingredient-link" style="color: #3366CC;">${n}</a>`)}),t}(a):s.textContent=a,l++,setTimeout(t,r)}else"enhanced"===c&&u()}()}).catch(n=>{console.error("Error:",n),t.classList.remove("rotate"),t.classList.remove("animate-svg"),setTimeout(()=>{t.querySelectorAll('g[class^="outer-donut-"] > g').forEach(n=>{n.style.transform="translate(0, 0)"})},0)})}}())})}()}}();